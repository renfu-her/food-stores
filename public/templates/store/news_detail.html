{% extends "base/store_base.html" %}

{% block content %}
<div class="container my-5">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ url_for('customer.index') }}">首頁</a></li>
            <li class="breadcrumb-item"><a href="{{ url_for('customer.news') }}">最新消息</a></li>
            <li class="breadcrumb-item active">{{ news.name }}</li>
        </ol>
    </nav>
    
    <div class="card border-0 shadow-sm">
        <div class="card-body p-4">
            <h1 class="mb-3">{{ news.name }}</h1>
            
            <div class="d-flex align-items-center text-muted mb-4">
                <i class="bi bi-calendar3 me-2"></i>
                <span>發布日期：{{ news.publish_date.strftime('%Y年%m月%d日') if news.publish_date else '' }}</span>
            </div>
            
            {% if news.image_path %}
            <div class="mb-4">
                <img src="{{ news.image_path }}" alt="{{ news.name }}" class="img-fluid rounded">
            </div>
            {% endif %}
            
            {% if news.description %}
            <div class="news-content markdown-content"></div>
            {% endif %}
        </div>
    </div>
    
    <div class="mt-4">
        <a href="{{ url_for('customer.news') }}" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left me-2"></i>返回列表
        </a>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
.markdown-content {
    line-height: 1.8;
    font-size: 1.05rem;
}
.markdown-content h1,
.markdown-content h2,
.markdown-content h3 {
    margin-top: 1.5rem;
    margin-bottom: 1rem;
}
.markdown-content h1 {
    font-size: 2rem;
    font-weight: bold;
}
.markdown-content h2 {
    font-size: 1.75rem;
    font-weight: bold;
}
.markdown-content h3 {
    font-size: 1.5rem;
    font-weight: bold;
}
.markdown-content p {
    margin-bottom: 1rem;
}
.markdown-content ul,
.markdown-content ol {
    margin-bottom: 1rem;
    padding-left: 2rem;
}
.markdown-content img {
    max-width: 100%;
    height: auto;
    margin: 1rem 0;
}
.markdown-content code {
    background: #f4f4f4;
    padding: 2px 6px;
    border-radius: 3px;
    font-family: monospace;
}
.markdown-content pre {
    background: #f4f4f4;
    padding: 1rem;
    border-radius: 4px;
    overflow-x: auto;
}
.markdown-content blockquote {
    border-left: 4px solid #ddd;
    padding-left: 1rem;
    margin: 1rem 0;
    color: #666;
}
</style>
{% endblock %}

{% block extra_js %}
{{ super() }}
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script>
$(document).ready(function() {
    {% if news.description %}
    const markdown = {{ news.description|tojson }};
    const html = marked.parse(markdown);
    document.querySelector('.news-content').innerHTML = html;
    {% endif %}
});
</script>
{% endblock %}


{% extends "base/backend_base.html" %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1>產品詳情</h1>
        <a href="{{ url_for('backend.products') }}" class="btn btn-secondary">返回列表</a>
    </div>
    
    <div class="detail-card">
        <div class="detail-header">
            <h2>{{ product.name }}</h2>
            <span class="badge {% if product.is_active %}badge-success{% else %}badge-danger{% endif %}">
                {% if product.is_active %}上架{% else %}下架{% endif %}
            </span>
        </div>
        
        <div class="detail-body">
            <div class="info-section">
                <h3>基本資訊</h3>
                <div class="info-item">
                    <label>產品ID:</label>
                    <span>{{ product.id }}</span>
                </div>
                <div class="info-item">
                    <label>產品名稱:</label>
                    <span>{{ product.name }}</span>
                </div>
                <div class="info-item">
                    <label>描述:</label>
                    <span>{{ product.description or '暫無描述' }}</span>
                </div>
                <div class="info-item">
                    <label>店鋪:</label>
                    <span>{{ product.shop.name if product.shop else 'N/A' }}</span>
                </div>
                <div class="info-item">
                    <label>分類:</label>
                    <span>{{ product.category.name if product.category else 'N/A' }}</span>
                </div>
                <div class="info-item">
                    <label>單價:</label>
                    <span>${{ product.unit_price|int }}</span>
                </div>
                <div class="info-item">
                    <label>折扣價:</label>
                    <span>
                        {% if product.discounted_price %}
                            ${{ product.discounted_price|int }}
                        {% else %}
                            無
                        {% endif %}
                    </span>
                </div>
                <div class="info-item">
                    <label>庫存數量:</label>
                    <span>{{ product.stock_quantity }}</span>
                </div>
                <div class="info-item">
                    <label>狀態:</label>
                    <span>
                        {% if product.is_active %}
                            <span class="badge badge-success">上架</span>
                        {% else %}
                            <span class="badge badge-danger">下架</span>
                        {% endif %}
                    </span>
                </div>
                <div class="info-item">
                    <label>建立時間:</label>
                    <span>{{ product.created_at.strftime('%Y-%m-%d %H:%M') if product.created_at else '' }}</span>
                </div>
            </div>
            
            {% if product.toppings %}
            <div class="toppings-section">
                <h3>可用Toppings ({{ product.toppings|length }})</h3>
                <div class="toppings-list">
                    {% for topping in product.toppings %}
                    <div class="topping-item">
                        <span>{{ topping.name }}</span>
                        <span>
                            {% if topping.price == 0 %}
                                <span class="free-badge">FREE</span>
                            {% else %}
                                ${{ topping.price|int }}
                            {% endif %}
                        </span>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

